{% extends "_master.html" %}
{% block overskrift %}{% endblock %}
{% block innhold %}

<div id="skjema">
	<ul><li><a href="#tabs-1">Foreslå nytt ord</a></li></ul>
	<div id="tabs-1">
		<form>
			<div id="message" class="ui-widget">
				<div class="ui-state-highlight ui-corner-all">
					<p>
						<span class="ui-icon ui-icon-info" style="float: left; margin-right: 0.3em;"></span>
						Ordet '<span id="foreslaatt_ord"></span>' er lagt i forslagskassen. Alle ordene i forslagskassen kan du finne <a href="{% url TilGodkjenningHandler %}" title="Lenke til liste over alle ord som er på valg"> her</a>. Takk for ditt bidrag!
					</p>
				</div>
			</div>
			<p>
				<label for="ord">Ord:</label><input name="ord" /></input><br />
				<label for="beskrivelse">Beskrivelse:</label><br />
				<textarea cols="60" rows="5" name="beskrivelse"></textarea><br />
				<button  id="send" value="Send forslag">Send forslag</button>
			</p>
		</form>
	</div>
</div>

<div id="dialog" style="display:none">Dette ordet finnes allerede!</div>
<script type="text/javascript">
$(document).ready(function() {
	$("#skjema").tabs();
	
	$("#send").click(function() {
		var forslagsData = {
			'ord' : $("input[name='ord']").val(),
			'beskrivelse' : $("textarea[name='beskrivelse']").val()
		};
		
		$.post("/forslag", forslagsData, function(data) {
			if (data.errorCode == 0)
			{
				$('#foreslaatt_ord').text(forslagsData.ord);
				$('#message').show();
				$(':input').val('');
			} else if (data.errorCode == 1) {
				$("#dialog").dialog({
					bgiframe: true,
					modal: true,
					buttons: {
						Ok: function() {
							$(this).dialog('close');
						}
					}
				});
			}
		}, "json");
		return false;
	});
});
</script>
{% endblock %}